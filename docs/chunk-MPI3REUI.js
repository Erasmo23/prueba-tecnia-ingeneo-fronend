import{a as H,b as u,c as z,d as J,e as K,f as Q,g as W,h as X,i as Y,j as Z,k as tt,l as et}from"./chunk-C2A564BJ.js";import{D as x,F as j,G as r,H as o,I as b,J as M,L as v,M as q,N as s,O as d,S as O,T as R,U as $,Z as U,aa as V,ba as _,ca as E,d as N,da as P,ea as G,f as g,fa as A,g as L,i as k,l as T,m as C,o as m,p as h,q as y,t as D,u as I,y as l}from"./chunk-DACIZFZR.js";var rt=(()=>{let t=class t{constructor(){this.username="user",this.authService=m(V),this.router=m(E)}ngOnInit(){this.username=this.authService.getCorreoUser()}logout(){this.authService.logout(),this.router.navigateByUrl("auth/login")}};t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=h({type:t,selectors:[["app-dashboard-layout"]],decls:23,vars:1,consts:[["id","app"],[1,"navbar","navbar-expand","navbar-dark","bg-dark"],[1,"navbar-brand"],["routerLinkActive","active",1,"navbar-nav","mr-auto"],[1,"nav-item"],["routerLink","/dashboard",1,"nav-link"],["routerLink","/dashboard/productos",1,"nav-link"],["routerLink","/dashboard/addProducto",1,"nav-link"],[1,"navbar-nav","ml-auto"],[1,"nav-link"],["href","",1,"nav-link",3,"click"],[1,"container","container-fluid"]],template:function(e,a){e&1&&(r(0,"div",0)(1,"nav",1)(2,"label",2),s(3,"Ingeneo"),o(),r(4,"ul",3)(5,"li",4)(6,"a",5),s(7,"Home "),o()(),r(8,"li",4)(9,"a",6),s(10,"Produtos"),o()(),r(11,"li",4)(12,"a",7),s(13,"Agregar Productos"),o()()(),r(14,"ul",8)(15,"li",4)(16,"a",9),s(17),o()(),r(18,"li",4)(19,"a",10),v("click",function(){return a.logout()}),s(20,"Cerrar Sesi\xF3n"),o()()()(),r(21,"div",11),b(22,"router-outlet"),o()()),e&2&&(l(17),d(a.username))},dependencies:[_,P,G],encapsulation:2});let n=t;return n})();var B=(()=>{let t=class t{constructor(){this.baseUrl=U.baseUrlApi,this.http=m($)}getListProductos(){let i=`${this.baseUrl}/productos?page=0&size=10`;return this.http.get(i)}registro(i){let e=`${this.baseUrl}/productos`,a=i;return this.http.post(e,a).pipe(L(()=>!0),k(c=>{if(c.error&&typeof c.error=="object"){let w=c.error;return g(()=>w)}else{let w={errors:[{statusCode:c.status||500,type:"Error",source:"Angular App",message:"Algo sali\xF3 mal",description:"Hubo un error en la solicitud",localDateTime:new Date().toISOString()}]};return g(()=>w)}}))}delete(i){let e=`${this.baseUrl}/productos/${i}`;return this.http.delete(e).pipe(L(()=>!0),k(a=>{if(a.error&&typeof a.error=="object"){let c=a.error;return g(()=>c)}else{let c={errors:[{statusCode:a.status||500,type:"Error",source:"Angular App",message:"Algo sali\xF3 mal",description:"Hubo un error en la solicitud",localDateTime:new Date().toISOString()}]};return g(()=>c)}}))}};t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=T({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();var F=N(et());var ot=(()=>{let t=class t{constructor(){this.formBuilder=m(Z),this.service=m(B),this.router=m(E),this.peticionSaveProgress=!1,this.myForm=this.formBuilder.group({nombre:["",[u.required,u.maxLength(100),u.minLength(3)]],descripcion:["",[u.required,u.maxLength(100)]],peso:["",[u.maxLength(8)]]})}registro(){if(!this.peticionSaveProgress){this.peticionSaveProgress=!0;let i=this.myForm.value;this.service.registro(i).subscribe({next:()=>{F.default.fire({html:"Producto Agregado Existosamente!!!",icon:"success",confirmButtonText:"Aceptar",confirmButtonColor:"#0d1b5c"}).then(e=>{this.router.navigateByUrl("/dashboard/productos")})},error:e=>{this.peticionSaveProgress=!1;let a="<p>";e.errors.forEach(c=>{a+=`${c.description} <br>`}),a+="</p>",F.default.fire({html:a,icon:"error",confirmButtonText:"Aceptar",confirmButtonColor:"#0d1b5c"})}})}}};t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=h({type:t,selectors:[["app-add-producto"]],decls:23,vars:2,consts:[["autocomplete","off",1,"form-horizontal","mt-3",3,"formGroup","ngSubmit"],[1,"form-group","row","mb-3"],["for","nombre",1,"col-2","col-form-label"],[1,"col-10"],[1,"input-group"],["formControlName","nombre","id","nombre","placeholder","Nombre","type","text","required","required",1,"form-control"],["for","descripcion",1,"col-2","col-form-label"],["formControlName","descripcion","id","descripcion","placeholder","Descripci\xF3n","type","text","required","required",1,"form-control"],["for","peso",1,"col-2","col-form-label"],["formControlName","peso","id","peso","placeholder","Peso","type","number",1,"form-control"],[1,"form-group","row"],[1,"offset-2","col-10"],["name","submit","type","submit",1,"btn","btn-primary",3,"disabled"]],template:function(e,a){e&1&&(r(0,"form",0),v("ngSubmit",function(){return a.registro()}),r(1,"div",1)(2,"label",2),s(3,"Nombre"),o(),r(4,"div",3)(5,"div",4),b(6,"input",5),o()()(),r(7,"div",1)(8,"label",6),s(9,"Descripci\xF3n"),o(),r(10,"div",3)(11,"div",4),b(12,"input",7),o()()(),r(13,"div",1)(14,"label",8),s(15,"Peso"),o(),r(16,"div",3)(17,"div",4),b(18,"input",9),o()()(),r(19,"div",10)(20,"div",11)(21,"button",12),s(22,"Guardar"),o()()()()),e&2&&(x("formGroup",a.myForm),l(21),x("disabled",a.myForm.invalid))},dependencies:[K,H,Q,z,J,Y,W,X],encapsulation:2});let n=t;return n})();var p=N(et());function st(n,t){if(n&1){let f=M();r(0,"tr")(1,"th"),s(2),o(),r(3,"th"),s(4),o(),r(5,"td"),s(6),o(),r(7,"td"),s(8),o(),r(9,"td")(10,"button",6),v("click",function(){let a=D(f).$implicit,c=q();return I(c.delete(a.productoId))}),s(11,"Borrar"),o()()()}if(n&2){let f=t.$implicit;l(2),d(f.productoId),l(2),d(f.nombre),l(2),d(f.descripcion),l(2),d(f.peso)}}var it=(()=>{let t=class t{constructor(){this.listaProductos=[],this.pageable={number:0,size:10},this.service=m(B)}ngOnInit(){this.getData()}getData(){this.service.getListProductos().subscribe(i=>{i._embedded?(this.listaProductos=i._embedded.data,this.pageable=i.pageable):this.listaProductos=[]},i=>{if(i.error&&typeof i.error=="object"){let e="<p>";i.error.errors.forEach(c=>{e+=`${c.description} <br>`}),e+="</p>",p.default.fire({html:e,icon:"error",confirmButtonText:"Aceptar",confirmButtonColor:"#0d1b5c"})}else p.default.fire({html:"Error no controlado al obtener la data",icon:"error",confirmButtonText:"Aceptar",confirmButtonColor:"#0d1b5c"})})}delete(i){p.default.fire({html:"&iquest;Est&aacute; seguro que desea eliminar el producto?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#0d1b5c",cancelButtonColor:"#d33",confirmButtonText:"Aceptar",cancelButtonText:"Cancelar",showLoaderOnConfirm:!0,preConfirm:()=>{this.service.delete(i).subscribe({next:()=>{p.default.fire({html:"Producto Eliminado Existosamente!!!",icon:"success",confirmButtonText:"Aceptar",confirmButtonColor:"#0d1b5c"}).then(e=>{this.getData()})},error:e=>{let a="<p>";e.errors.forEach(c=>{a+=`${c.description} <br>`}),a+="</p>",p.default.fire({html:a,icon:"error",confirmButtonText:"Aceptar",confirmButtonColor:"#0d1b5c"})}})}}).then(e=>{e.dismiss!=null&&e.dismiss!=null&&p.default.fire({html:"La operaci&oacute;n fue cancelada",icon:"error",confirmButtonText:"Aceptar",confirmButtonColor:"#0d1b5c"})})}};t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=h({type:t,selectors:[["app-list-producto"]],decls:21,vars:1,consts:[[1,"row"],[1,"col-md-12"],["routerLink","/dashboard/addProducto","type","button",1,"btn","btn-success"],[1,"table"],["scope","col"],[4,"ngFor","ngForOf"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(e,a){e&1&&(r(0,"div",0)(1,"div",1)(2,"p"),s(3,"Productos"),o(),r(4,"button",2),s(5,"Nuevo Producto"),o(),r(6,"table",3)(7,"thead")(8,"tr")(9,"th",4),s(10,"Id"),o(),r(11,"th",4),s(12,"Nombre "),o(),r(13,"th",4),s(14,"Descripci\xF3n"),o(),r(15,"th",4),s(16,"Peso"),o(),r(17,"th",4),s(18,"Borrar"),o()()(),r(19,"tbody"),j(20,st,12,4,"tr",5),o()()()()),e&2&&(l(20),x("ngForOf",a.listaProductos))},dependencies:[O,P],encapsulation:2});let n=t;return n})();var ct=[{path:"",component:rt,children:[{path:"addProducto",component:ot},{path:"productos",component:it},{path:"**",redirectTo:"dashboard"}]}],nt=(()=>{let t=class t{};t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=y({type:t}),t.\u0275inj=C({imports:[A.forChild(ct),A]});let n=t;return n})();var zt=(()=>{let t=class t{};t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=y({type:t}),t.\u0275inj=C({imports:[R,nt,tt]});let n=t;return n})();export{zt as DashboardModule};
